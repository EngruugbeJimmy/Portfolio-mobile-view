const projects = {
  p22: {
    name: 'Wishyacht',
    description: "In physical shop retail, the merchant don't has options which are available in e-commerce shop, that can help to identify visitor and provide customized visit for him in order to optimize the chance to his conversion to buy. This project, uses face recognition to help merchant get history informations about each new visitor, which can help to provide him a customized and guided visit, therefore optimize incomes of the shop.",
    img: 'statics/images/wishyacht.png',
    technolgies: ['React', 'Redux', 'API REST', 'Javascript'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Own project', 'Front-end developer', 2022],
  },
  p21: {
    name: 'COMPANIES 3D',
    description: 'a web application that allows users to see the metrics of the top companies.',
    img: 'statics/images/company.png',
    technolgies: ['React', 'Redux', 'API REST', 'Javascript', 'JEST', 'CSS3', 'html5'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Own project', 'Front-end developer', 2022],
  },
  p19: {
    name: 'Budget mobile',
    description: 'a mobile application that allows users to manage their budget and transactions.: there are a list of transactions associated with a category, so that user can see how much money he spent and on what.',
    img: 'statics/images/budget.png',
    technolgies: ['Rails', 'Ruby', 'postgresql', 'bootstrap', 'CSS3', 'html5'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Own project', 'Front-end developer', 2022],
  },
  p3: {
    name: 'Space Travelers Hub',
    description: 'In this project, we have built a web application for a company that provides commercial and scientific space travel services. The application will allow users to book rockets and join selected space missions.',
    img: 'statics/images/space_hub.gif',
    technolgies: ['React', 'Redux', 'javascript', 'API', 'CSS3', 'html5'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Own project', 'Front-end developer', 2022],
  },
  p4: {
    name: 'CommonLit Readability Prize',
    description: 'CommonLit, Inc., is a nonprofit education technology organization serving over 20 million teachers and students with free digital reading and writing lessons for grades 3-12. Together with Georgia State University, an R1 public research university in Atlanta, they are challenging Kagglers to improve readability rating methods. In this competition, we had built algorithms to rate the complexity of reading passages for grade 3-12 classroom use. To accomplish this, we had used state of the art machine learning tools with a dataset that includes readers from a wide variety of age groups and a large collection of texts taken from various domains.',
    img: 'statics/images/commonlit-readability-prize.jpg',
    technolgies: ['Python', 'Pytorch', 'LSTM', 'CNN', 'Bert', 'Roberta', 'LGBM', 'SVM'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['CommonLit', 'Data scientist competitor', 2021],
  },
  p5: {
    name: 'Tunisa Covid Tracker',
    description: 'In this project, we have built a mobile web application to track covid situation in Tunisia. It provides the latest update of the main indicators. Besides, it allows to breakdown each indicators and display chart evolving of each one within the current month.',
    img: 'statics/images/covid app.gif',
    technolgies: ['React', 'Redux', 'JavaScript', 'API', 'CSS3', 'html5'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['CodeX', 'Software developer', 2021],
  },
  p6: {
    name: 'Shopee - Price Match Guarantee',
    description: 'Retail companies use a variety of methods to assure customers that their products are the cheapest. Among them is product matching, which allows a company to offer products at rates that are competitive to the same product sold by another retailer. Shopee is the leading e-commerce platform in Southeast Asia and Taiwan. Customers appreciate its easy, secure, and fast online shopping experience tailored to their region. The company also provides strong payment and logistical support along with a \'Lowest Price Guaranteed\' feature on thousands of Shopee\'s listed products. In this competition, we had been requested to build a model that predicts which items are the same products for Shopee company.',
    img: 'statics/images/shopee.png',
    technolgies: ['Python', 'Tensorflow', 'Sckit-learn', 'Rapids', 'bert', 'Effnet', 'Arcface'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Shopee', 'Data scientist competitor', 2021],
  },
  p7: {
    name: 'Web development course app',
    description: 'A simple responsive site for a CMS course conference. ',
    img: 'statics/images/overview.png',
    technolgies: ['JavaScript', 'CSS3', 'html5'],
    linkToLiveVersion: 'https://taher-web-dev.github.io/Web-dev-course-app/',
    linkToSource: '#',
    generalInf: ['Codeacademy', 'Software developer', 2021],
  },
  p8: {
    name: 'Natural Language Processing with Disaster Tweets',
    description: 'Twitter has become an important communication channel in times of emergency. The ubiquitousness of smartphones enables people to announce an emergency they’re observing in real-time. Because of this, more agencies are interested in programatically monitoring Twitter (i.e. disaster relief organizations and news agencies). In this competition, we’re challenged to build a machine learning model that predicts which Tweets are about real disasters and which one’s aren’t. We had access to a dataset of 10,000 tweets that were hand classified.',
    img: 'statics/images/disasater_tweet.jpeg',
    technolgies: ['Python', 'Pytorch', 'Tensorfow', 'LSTM', 'NaiveBayes', 'Gloves', 'Bert', 't-sne'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Kaggle', 'Data scientist competitor', 2021],
  },
  p18: {
    name: 'Chicken Meals!',
    description: 'a Meals application with javascript and API.',
    img: 'statics/images/meals.png',
    technolgies: ['Javascript', 'API', 'Webpack', 'jest', 'css3', 'kanban'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Microverse', 'Software developer', 2021],
  },
  p9: {
    name: 'Riiid Answer Correctness Prediction',
    description: 'Riiid Labs, an AI solutions provider delivering creative disruption to the education market, empowers global education players to rethink traditional ways of learning leveraging AI. With a strong belief in equal opportunity in education, Riiid launched an AI tutor based on deep-learning algorithms in 2017 that attracted more than one million South Korean students. On 2021, the company released EdNet, the world’s largest open database for AI education containing more than 100 million student interactions. In this competition, our challenge is to create algorithms for "Knowledge Tracing," the modeling of student knowledge over time. The goal is to accurately predict how students will perform on future interactions.',
    img: 'statics/images/riid.png',
    technolgies: ['Python', 'Scikit', 'Keras', 'LGBM', 'KMeans'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Riiid', 'Data scientist competitor', 2020],
  },
  p10: {
    name: 'Bengali.AI Handwritten Grapheme Classification',
    description: 'Bengali is the 5th most spoken language in the world with hundreds of million of speakers. It’s the official language of Bangladesh and the second most spoken language in India. Considering its reach, there’s significant business and educational interest in developing AI that can optically recognize images of the language handwritten. This challenge hopes to improve on approaches to Bengali recognition. Bangladesh-based non-profit Bengali.AI is focused on helping to solve this problem. They build and release crowdsourced, metadata-rich datasets and open source them through research competitions. Through this work, Bengali.AI hopes to democratize and accelerate research in Bengali language technologies and to promote machine learning education. For this competition, we’re given the image of a handwritten Bengali grapheme and are challenged to separately classify three constituent elements in the image: grapheme root, vowel diacritics, and consonant diacritics.',
    img: 'statics/images/bengali.png',
    technolgies: ['Python', 'Opencv', 'Keras'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Data.AI', 'Data scientist competitor', 2020],
  },
  p11: {
    name: 'ASHRAE - Great Energy Predictor III',
    description: 'Thankfully, significant investments are being made to improve building efficiencies to reduce costs and emissions. The question is, are the improvements working? In this competition, we had developed accurate models of metered building energy usage in the following areas: chilled water, electric, hot water, and steam meters. The data comes from over 1,000 buildings over a three-year timeframe. With better estimates of these energy-saving investments, large scale investors and financial institutions will be more inclined to invest in this area to enable progress in building efficiencies.',
    img: 'statics/images/ashrae.png',
    technolgies: ['Python', 'Scikit-learn', 'XGBoost'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['ASHRAE ', 'Data scientist competitor', 2019],
  },
  p12: {
    name: 'Develop a proof of concept',
    description: 'This project aim to give new approach , state of the art in order to ameliorate the results obtained in the project titled Perform automatic image indexing. Indeed we adopt new approach in this project consist to use an algorhitm Mask RCNN combined to a classical convnet in order to classify dog breed based on his photo.',
    img: 'statics/images/poc.jpeg',
    technolgies: ['Python', 'Opencv', 'Keras', 'Mask R-CNN', 'VGG16'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['CentraleSupélec', 'Data scientist', 2019],
  },
  p14: {
    name: 'Automatically categorize questions',
    description: 'This project intend to develop a suggest tag system to the site Stack Overflow . This site is a well known site of question-reply in the informatic field, so to make question in this site we should enter various tags which allow to easy find the question. Our goal is to test a supervised and unsupervised approachs , which will allow to assign automaticaly tags for a question. Then , we carry out a comparison of the results obtained from the two approachs . Besides we develop an API , which allow to assign tags to each introduced question based on the two tested approachs .',
    img: 'statics/images/stackoverflow.png',
    technolgies: ['Python', 'NLTK', 'LDA', 'flask', 'SQL'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Niger', 'Data nation', 2019],
  },
  p15: {
    name: 'Segment customer behavior',
    description: 'The British company Datazon, leader in the online sale of all kinds of items, has every interest in better understanding the behavior of its customers to increase the frequency of purchase and the value of the average basket.The goal is to understand the different types of users through their behavior over time, in order to detect those most likely to make a purchase.',
    img: 'statics/images/datazon.png',
    technolgies: ['Python', 'KMeans', 'RandomForest', 'KNN', 'SVM'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Niger', 'Data nation', 2019],
  },
  p16: {
    name: 'Anticipate the flight delay of planes',
    description: 'In order to optimize logistics and anticipate delays, AirData company asks to analyze the data provided to assess the behavior of the various existing aviation companies.This evaluation will make it possible to derive a first model to predict delays from the variables provided.',
    img: 'statics/images/airdata.png',
    technolgies: ['Python', 'KNN', 'SVM', 'flask', 'Heroku'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Niger ', 'Data nation', 2019],
  },
  p17: {
    name: 'Develop a movie recommendation engine',
    description: 'A site on the cinema, They would like to launch a movie recommendations engine to save the movie nights of their future customers. Our mission is using unsupervised methods we will need to build an API capable of returning 5 recommendations of similar and interesting movies to the viewer. This from a request for a movie name (or id).',
    img: 'statics/images/cinema.jpg',
    technolgies: ['Python', 'Kmeans', 'Seaborn', 'flask', 'PCA'],
    linkToLiveVersion: '#',
    linkToSource: '#',
    generalInf: ['Niger', 'Data Nation', 2018],
  },
};

const myWork = document.querySelector('#my_work');

function createMobileProjectCard(key) {
  const projectSection = document.createElement('div');
  const img = document.createElement('img');
  const general = document.createElement('div');
  const infGeneral = document.createElement('div');
  const title = document.createElement('h3');
  const inf = document.createElement('p');
  const description = document.createElement('p');
  const techns = document.createElement('ul');
  const btnLoad = document.createElement('a');
  const footer = document.createElement('footer');
  const externalLink = document.createElement('div');
  const descriptionList = projects[key].description.split(' ');
  const descriptionNbrWords = descriptionList.length;
  externalLink.appendChild(btnLoad);
  externalLink.classList.add('external_link');
  footer.appendChild(techns);
  footer.appendChild(externalLink);
  general.appendChild(title);
  general.appendChild(infGeneral);
  general.appendChild(description);
  general.appendChild(footer);
  general.classList.add('general');
  infGeneral.appendChild(inf);
  infGeneral.id = 'general_inf';
  projectSection.appendChild(img);
  img.src = projects[key].img;
  img.alt = 'Image project';
  img.classList.add('project_image');
  projectSection.appendChild(general);
  title.innerHTML = projects[key].name;
  inf.innerHTML = `${projects[key].generalInf[0]}  &bullet;  ${projects[key].generalInf[1]}  &bullet;  ${projects[key].generalInf[2]}`;
  inf.classList.add('title');
  description.innerHTML = descriptionList.slice(0, Math.min(17, Math.floor(0.4 * descriptionNbrWords))).join(' ');
  description.innerHTML += '...';

  description.classList.add('project_description');

  projects[key].technolgies.forEach((element) => {
    techns.innerHTML = `${techns.innerHTML}<li>${element} </li>`;
  });
  techns.classList.add('skills');
  btnLoad.innerHTML = 'See Project';
  btnLoad.href = '#';
  projectSection.appendChild(general);
  projectSection.key = key;
  projectSection.className = 'project';

  return projectSection;
}

Object.keys(projects).forEach((key) => {
  myWork.appendChild(createMobileProjectCard(key));
});

const popUpBtn = document.querySelectorAll('.external_link');
const btnSource = document.createElement('a');
const btnLive = document.createElement('a');
const externalButton = document.createElement('div');
const wrapper = document.createElement('div');
const home = document.querySelector('.home-page');
const cancelBtn = document.createElement('img');
const imgWrapper = document.createElement('div');
const header = document.createElement('div');
const title = document.createElement('h3');
const infos = document.createElement('p');
const image = document.createElement('img');
const description = document.createElement('p');
const skills = document.createElement('ul');

imgWrapper.classList.add('pop-header-div');
cancelBtn.src = './statics/images/Icon.svg';
imgWrapper.appendChild(cancelBtn);

btnSource.target = '_blank';
btnLive.target = '_blank';

description.classList.add('project_description');

infos.classList.add('inf');

const bottom = document.createElement('div');
const mobilePart = document.createElement('div');

title.classList.add('pop-header-h3');
header.appendChild(title);
title.style.marginLeft = '32px';
header.appendChild(imgWrapper);
header.classList.add('pop-header');
btnSource.innerHTML = '<img src="statics/images/gitbutton.png" alt="Live version"> ';
btnLive.innerHTML = '<img src="statics/images/Enabled.png" alt="Live version"> ';
externalButton.appendChild(btnLive);
externalButton.appendChild(btnSource);
externalButton.style.marginBottom = '32px';

bottom.appendChild(skills);
bottom.appendChild(externalButton);

mobilePart.appendChild(description);
mobilePart.appendChild(bottom);
mobilePart.classList.add('mobile-part-class');
mobilePart.querySelector('p').classList.add('pop-header-description');
infos.style.marginLeft = '32px';
image.classList.add('project_image');
image.classList.add('pop-header-img');

wrapper.appendChild(header);
wrapper.appendChild(infos);
wrapper.appendChild(image);
wrapper.appendChild(mobilePart);

wrapper.style.zIndex = '999';
wrapper.style.position = 'absolute';
wrapper.style.top = '0';

wrapper.classList.add('pop-window');
wrapper.style.visibility = 'hidden';
home.appendChild(wrapper);

popUpBtn.forEach((btn) => {
  btn.addEventListener('click', () => {
    const parentId = btn.parentElement.parentElement.parentElement.key;
    title.innerHTML = projects[parentId].name;
    infos.innerHTML = `${projects[parentId].generalInf[0]}  &bullet;  ${projects[parentId].generalInf[1]}  &bullet;  ${projects[parentId].generalInf[2]}`;
    image.src = projects[parentId].img;
    description.innerHTML = projects[parentId].description;
    skills.innerHTML = '';
    projects[parentId].technolgies.forEach((element) => {
      skills.innerHTML = `${skills.innerHTML}<li>${element} </li>`;
    });
    btnSource.href = projects[parentId].linkToSource;
    btnLive.href = projects[parentId].linkToLiveVersion;
    skills.classList.add('skills');
    skills.classList.add('techns');

    home.style.backgroundColor = 'rgba(193, 199, 208, 1)';
    wrapper.style.visibility = 'visible';

    wrapper.style.position = 'fixed';
    wrapper.style.overflow = 'scroll';
  });
});
const cancel = document.querySelector('.pop-header-div');

cancel.addEventListener('click', () => {
  document.querySelector('.pop-window').style.visibility = 'hidden';
  home.style.backgroundColor = '#fff';
  wrapper.style.position = 'hidden';
});
/* form control */
function isLowerCase(input) {
  const str = input.value.trim();
  return str === str.toLowerCase();
}
function showMessage(form, invalidMsg) {
  const target = form.querySelector('span');
  target.innerText = invalidMsg;
}
function validateEmail(form, input, invalidMsg) {
  if (isLowerCase(input)) {
    return true;
  }
  showMessage(form, invalidMsg);
  return false;
}
const form = document.querySelector('form');
const msg = 'The form was not sent, the email text should be in lower case.';
form.addEventListener('submit', (event) => {
  const mail = form.elements.email;
  const emailValid = validateEmail(form, mail, msg);

  if (!emailValid) {
    event.preventDefault();
  }
});
/* save form data */
const userName = form.elements.name;
const userEmail = form.elements.email;
const userMessage = form.elements.message;
function populateStorage() {
  const userInput = {
    name: form.elements.name.value,
    email: form.elements.email.value,
    message: form.elements.message.value,
  };
  localStorage.setItem('userInput', JSON.stringify(userInput));
}
function setForm() {
  const storedInput = JSON.parse(localStorage.getItem('userInput'));
  const currentUserName = storedInput.name;
  const currentUserEmail = storedInput.email;
  const currentMessage = storedInput.message;

  form.elements.name.value = currentUserName;
  form.elements.email.value = currentUserEmail;
  form.elements.message.value = currentMessage;
}
if (!localStorage.getItem('userInput')) {
  populateStorage();
} else {
  setForm();
}
userName.onchange = populateStorage;
userEmail.onchange = populateStorage;
userMessage.onchange = populateStorage;